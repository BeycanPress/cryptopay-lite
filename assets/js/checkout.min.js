($=>{$(document).ready(()=>{let startedApp;function handleUnloadEvent(){if(-1===navigator.userAgent.indexOf("MSIE")&&!document.documentMode)return!0;e.preventDefault()}function printError(errorMessage){var scrollElement;$(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),$form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+errorMessage+"</div>"),$form.removeClass("processing").unblock(),$form.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),(scrollElement=(scrollElement=$(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout")).length?scrollElement:$form).length&&$("html, body").animate({scrollTop:scrollElement.offset().top-100},1e3),$(document.body).trigger("checkout_error",[errorMessage])}async function checkFormProcess(network,currency,init=!0){let data=$form.serialize();var params=CryptoPayLiteVars.params||{},init=(network=cplHelpers.removeNoNeededParams(network),data=(data=(data=(data+="&cp_init="+init)+("&cp_params="+JSON.stringify(params)))+("&cp_network="+JSON.stringify(network)))+("&cp_currency="+JSON.stringify(currency)),await new Promise(resolve=>{$.ajax({data:data,type:"POST",dataType:"json",url:wc_checkout_params.checkout_url,success:function(response){if($(window).off("beforeunload",handleUnloadEvent),response.success)$(".woocommerce-NoticeGroup-checkout").remove(),response.data&&response.data.init&&startedApp.store.payment.setInit(response.data.init),resolve(null);else{if(response.data){if(!0===response.data.reload)return void window.location.reload();!0===response.data.refresh&&$(document.body).trigger("update_checkout")}response.message||response.messages?printError(response.message||response.messages):printError('<div class="woocommerce-error">'+CryptoPayLiteLang.defaultErrorMsg+"</div>"),CryptoPayLiteVars.buttonProcess&&CryptoPayLiteApp.modal?.close(),resolve({error:!0})}},error:function(jqXHR,textStatus,errorThrown){$(window).off("beforeunload",handleUnloadEvent),printError('<div class="woocommerce-error">'+(errorThrown||CryptoPayLiteLang.defaultErrorMsg)+"</div>"),CryptoPayLiteVars.buttonProcess&&CryptoPayLiteApp.modal?.close(),resolve({error:!0})},complete:function(){cplHelpers.closePopup(),CryptoPayLiteApp.dynamicData.add({wcForm:cplHelpers.formToObj("form.checkout")})}})}));return init}$form=$("form.checkout"),CryptoPayLiteConfig.init?(CryptoPayLiteApp.events.add("init",async ctx=>{ctx.disableAutoQr=!0},"wc_checkout"),CryptoPayLiteApp.events.add("payNow",ctx=>(cplHelpers.waitingPopup(CryptoPayLiteLang.checkingForm),checkFormProcess(ctx.network,ctx.order.paymentCurrency,!1)),"wc_checkout")):CryptoPayLiteApp.events.add("init",async ctx=>{Object.assign(ctx,await checkFormProcess(ctx.network,ctx.currency))},"wc_checkout"),CryptoPayLiteVars.buttonProcess&&$(document).on("click","#cryptopay_lite_modal",CryptoPayLiteApp.modal?.open),$(document).on("updated_checkout",function(){startedApp?startedApp.reStart(CryptoPayLiteVars.order):startedApp=CryptoPayLiteApp.start(CryptoPayLiteVars.order)}),$("form.checkout").on("change",'input[name="payment_method"]',function(){$(document.body).trigger("update_checkout")})})})(jQuery);
//# sourceMappingURL=checkout.min.js.map
